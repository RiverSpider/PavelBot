{% extends "base.html" %}

{% block content %}
<div class="app">
    <!-- Header -->
    <header class="header">
        <h1>üìä Tinkoff Invest</h1>
        <div class="user-info" id="userInfo">
            –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
    </header>

    <!-- Setup Section -->
    <section id="setupSection" class="section hidden">
        <h2>üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API</h2>
        <div class="input-group">
            <input type="text" id="apiToken" placeholder="–í–≤–µ–¥–∏—Ç–µ API —Ç–æ–∫–µ–Ω Tinkoff" class="input">
            <button onclick="setToken()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω</button>
        </div>
        <div id="tokenStatus"></div>
    </section>

    <!-- Accounts Section -->
    <section id="accountsSection" class="section hidden">
        <h2>üìã –í—ã–±–æ—Ä —Å—á–µ—Ç–æ–≤</h2>
        <div id="accountsList"></div>
        <button onclick="saveAccounts()" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä</button>
    </section>

    <!-- Main Dashboard -->
    <section id="dashboardSection" class="section hidden">
        <!-- Portfolio Summary -->
        <div class="card">
            <h3>üí∞ –û–±—â–∏–π –ø–æ—Ä—Ç—Ñ–µ–ª—å</h3>
            <div id="portfolioSummary">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- Quick Actions -->
        <div class="actions-grid">
            <button onclick="loadPortfolio()" class="btn btn-secondary">–û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å</button>
            <button onclick="showIncome('week')" class="btn btn-secondary">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é</button>
            <button onclick="showIncome('month')" class="btn btn-secondary">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∑–∞ –º–µ—Å—è—Ü</button>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="card">
                <h3>üìà –ö–∞–ø–∏—Ç–∞–ª</h3>
                <div id="capitalChart"></div>
            </div>
            <div class="card">
                <h3>üí∞ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</h3>
                <div id="incomeChart"></div>
            </div>
        </div>

        <!-- Positions -->
        <div class="card">
            <h3>üìä –ü–æ–∑–∏—Ü–∏–∏</h3>
            <div id="positionsList"></div>
        </div>
    </section>

    <!-- Loading -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>
</div>
{% endblock %}
